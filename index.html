<html>
	<head>
		<script src="https://www.google.com/jsapi"></script>
		<script src="https://code.jquery.com/jquery-1.8.2.js"></script>
		<script src="https://jquery-csv.googlecode.com/git/src/jquery.csv.js"></script>
		<script>
			"use strict";

			function loadCSV(file, callback) {
				$.get(file, null, function(data){
					var csv = $.csv.toArrays(data, {
						onParseValue: $.csv.hooks.castToScalar
					});
					callback(csv);
				}, 'text');
			}

			function drawChart(dataArray, title, hAxis, vAxis, div) {
				var data = google.visualization.arrayToDataTable(dataArray);
				var options = {
					title: title,
					legend: { position: 'top' },
					hAxis: { title: hAxis },
					vAxis: { title: vAxis }
				};

				var chart = new google.visualization.LineChart(document.getElementById(div));
				chart.draw(data, options);
			}

			loadCSV('data-cycles', function(csv){
				google.setOnLoadCallback(function() {
					drawChart(csv, 'Muen inter-VM pingpong cycles', 'Build',
					          'Cycles', 'chart_div');
				});
			});

			google.load("visualization", "1", {packages:["corechart"]});
		</script>
	</head>
	<body>
		<div id="chart_div" style="width: textwidth; height: 500px;"></div>
	</body>
</html>
